# Smart Speeder - 智能视频速度控制器

## 项目概述
Smart Speeder 是一个功能强大的 Chrome 扩展，用于智能控制网页视频的播放速度。该扩展支持全局开关、自定义网址规则、悬浮球显示、预设速度切换以及设置导出导入功能。

## 核心功能

### 🎮 视频速度控制
- **速度范围**：0.25x - 16.0x 精确控制
- **调整步长**：0.25x
- **多种控制方式**：键盘快捷键、弹出窗口、悬浮球交互

### 🌟 悬浮球显示系统
- **实时显示**：右下角绿色圆形按钮，实时显示当前播放速度
- **智能交互**：点击直接打开设置页面，悬停放大效果
- **状态感知**：根据规则自动调整透明度，不生效时半透明显示
- **自动创建**：在生效页面自动创建，非生效页面智能隐藏

### ⚡ 预设速度切换
- **一键切换**：Ctrl+Shift+Space 在预设速度和正常速度间快速切换
- **智能逻辑**：当前速度等于预设时切换到 1.0x，否则切换到预设速度
- **自定义预设**：可在设置页面修改预设值（默认 2.0x）

### 🎯 智能规则系统
- **生效规则**：仅在指定网站生效（正则表达式支持）
- **排除规则**：在指定网站不生效（正则表达式支持）
- **规则优先级**：全局开关 → 生效规则 → 排除规则 → 默认全部生效

### 📤📥 设置导出导入
- **完整备份**：导出所有设置到 JSON 文件
- **跨设备同步**：在不同设备间快速同步配置
- **数据验证**：导入时自动验证数据完整性和有效性
- **安全保护**：只包含配置数据，不涉及个人隐私信息

### ⌨️ 键盘快捷键
- **Ctrl+Shift+Right**：提高视频速度 (+0.25x)
- **Ctrl+Shift+Left**：降低视频速度 (-0.25x)
- **Ctrl+Shift+Space**：预设速度切换
- **Mac 支持**：Command 键替代 Ctrl 键

## 技术架构
- **Manifest V3**：使用最新的 Chrome 扩展规范
- **后台服务**：监听键盘快捷键事件，处理跨标签页通信
- **内容脚本**：注入到所有网页，控制视频元素和悬浮球显示
- **存储系统**：Chrome Storage API 持久化保存设置
- **规则引擎**：基于正则表达式的 URL 匹配算法
- **动态监控**：MutationObserver 监控新增视频元素

## 项目文件结构
```
smart_speeder/
├── manifest.json              # 扩展配置文件 (Manifest V3)
├── background.js              # 后台服务，处理快捷键和消息通信
├── content.js                 # 内容脚本，视频控制和悬浮球
├── popup.html                 # 弹出窗口界面
├── popup.js                   # 弹出窗口逻辑
├── options.html               # 设置页面界面
├── options.js                 # 设置页面逻辑
├── shortcuts.html             # 快捷键配置页面
├── shortcuts.js               # 快捷键配置逻辑
├── test.html                  # 基础功能测试页面
├── test_export_import.html    # 导出导入功能测试页面
├── test_shortcuts.html        # 快捷键功能测试页面
├── test_shortcuts_simple.js   # 快捷键测试脚本
├── package.json               # 项目配置
├── README.md                  # 英文完整文档
├── 安装说明.md                 # 中文安装指南
├── 功能概览.md                 # 详细功能说明
├── 导出导入说明.md             # 导出导入功能详解
├── 快捷键参考.md               # 快捷键使用参考
├── 预设功能说明.md             # 预设速度功能说明
├── 自定义快捷键说明.md         # 自定义快捷键配置说明
├── 项目总结.md                 # 项目总结文档
└── icons/                     # 扩展图标文件
    ├── icon16.png
    ├── icon32.png
    ├── icon48.png
    └── icon128.png
```

## 安装方法
1. 打开 Chrome 浏览器，访问 `chrome://extensions/`
2. 开启右上角的 **"开发者模式"**
3. 点击 **"加载已解压的扩展程序"**
4. 选择本项目文件夹

## 测试方法

### 基础功能测试
```bash
npm test  # 打开 test.html 进行基础功能测试
```

### 专项功能测试
- **导出导入测试**：打开 `test_export_import.html` 测试设置备份恢复功能
- **快捷键测试**：打开 `test_shortcuts.html` 测试快捷键配置和响应

### 完整测试流程
1. 安装扩展后，打开项目目录下的 `test.html` 文件
2. 使用快捷键测试视频速度控制功能
3. 观察右下角悬浮球的显示和交互
4. 点击悬浮球打开设置页面进行配置
5. 测试预设速度切换功能
6. 使用导出导入功能备份和恢复设置

## 开发命令
```bash
# 测试功能
npm test  # 打开 test.html 进行功能测试

# 注意：此项目为 Chrome 扩展，无需构建过程
# 直接加载到 Chrome 即可使用
```

## 项目状态
- ✅ 核心功能完全完成，已修复所有已知问题
- ✅ 悬浮球实时显示功能完整实现
- ✅ 预设速度切换系统正常工作
- ✅ 设置导出导入功能完整可用
- ✅ 自定义快捷键配置支持
- ✅ 完整的中英文文档体系
- ✅ 多个专项测试页面
- ✅ 正则表达式规则验证
- ✅ 跨标签页状态同步

## 新增功能亮点

### 悬浮球系统
- **即时可见性**：无需点击扩展图标即可查看当前速度
- **一键访问**：点击悬浮球直接进入设置页面
- **智能状态**：根据规则自动调整显示状态
- **视觉反馈**：速度变化时提供临时提示

### 预设速度切换
- **高效操作**：一键在常用速度和正常速度间切换
- **智能判断**：自动识别当前状态并执行相应操作
- **自定义配置**：支持用户自定义预设速度值

### 设置导出导入
- **设备同步**：轻松在不同设备间同步配置
- **备份保护**：防止设置丢失，支持定期备份
- **分享便利**：可与他人分享满意的配置
- **数据安全**：完整的验证机制确保数据完整性

## 常见问题

**Q: 为什么在某些网站不起作用？**
A: 检查是否设置了排除规则，或当前网站是否在生效规则中

**Q: 快捷键无效怎么办？**
A: 确保没有与其他扩展的快捷键冲突，或尝试重新加载扩展

**Q: 悬浮球不显示怎么办？**
A: 检查全局开关状态和规则设置，确认当前页面是否在生效范围内

**Q: 如何重置所有设置？**
A: 在设置页面点击"重置所有"按钮，或导入默认配置文件

**Q: 导出的设置文件包含什么信息？**
A: 包含所有用户配置，包括开关状态、规则列表、速度设置等，不包含任何个人隐私数据

**Q: 导入设置时提示格式错误怎么办？**
A: 确保选择的是正确的 JSON 文件，且文件内容未被手动修改

## 许可证
MIT License

## 项目信息
- **版本**：v1.0.0
- **更新时间**：2025-12-23
- **兼容性**：Chrome 88+, Edge 88+
- **开发者**：louisdwu
- **仓库地址**：https://github.com/louisdwu/video-speed-controller